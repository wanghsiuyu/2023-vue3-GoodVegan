import{_ as v,J as x,m as w,a as T,i as j,o as i,b as c,j as k,d as t,w as L,t as o,F as h,r as V,l as g}from"./index-20ebf4cd.js";import{l as m}from"./loadingStore-6e46e0b2.js";import{T as l}from"./toast-0d089cd6.js";const S="/vue3-QA/assets/check-fbee8a1c.svg",{VITE_URL:b,VITE_PATH:u}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"gracewang",BASE_URL:"/vue3-QA/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},E={data(){return{order:{},shipping:0}},methods:{toThousands:x,...w(m,["loading"]),getOrder(){const{orderId:d}=this.$route.params;this.$http.get(`${b}/api/${u}/order/${d}`).then(e=>{e.data.success&&(this.order=e.data.order,this.shipping=parseInt(this.order.total>=500?0:100))}).catch(e=>{l.fire({icon:"error",title:e.response.data.message,width:250})})},payOrder(d){this.$http.post(`${b}/api/${u}/pay/${d}`).then(e=>{e.data.success&&(this.getOrder(),l.fire({icon:"success",title:"已完成付款。",width:250}))}).catch(e=>{l.fire({icon:"error",title:e.response.data.message,width:250})})}},computed:{...T(m,["isLoading"])},mounted(){this.loading(),this.getOrder()}},O={class:"row justify-content-center mb-10"},A=g('<div class="col-3 border-bottom border-5 border-primary"><div class="d-flex flex-column align-items-center"><div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center mb-1" style="width:20px;height:20px;">1</div><p class="text-primary mb-2 fw-bold">填寫資料</p></div></div><div class="col-3 border-bottom border-5 border-primary"><div class="d-flex flex-column align-items-center"><div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center mb-1" style="width:20px;height:20px;">2</div><p class="text-primary mb-2 fw-bold">確認付款</p></div></div>',2),D={key:0,class:"col-3 border-bottom border-5 border-gray"},I=t("div",{class:"d-flex flex-column align-items-center"},[t("div",{class:"rounded-circle bg-gray text-white d-flex align-items-center justify-content-center mb-1",style:{width:"20px",height:"20px"}},"3"),t("p",{class:"text-gray mb-2 fw-bold"},"完成訂購")],-1),N=[I],R={key:1,class:"col-3 border-bottom border-5 border-primary"},U=t("div",{class:"d-flex flex-column align-items-center"},[t("div",{class:"rounded-circle bg-primary text-white d-flex align-items-center justify-content-center mb-1",style:{width:"20px",height:"20px"}},"3"),t("p",{class:"text-primary mb-2 fw-bold"},"完成訂購")],-1),$=[U],B={class:"row justify-content-center flex-lg-row-reverse"},P={class:"col-lg-5 mb-5 mb-lg-0"},C={class:"card border-0 bg-primary-light py-3 p-lg-5"},F={key:0,class:"card-body"},H=t("h2",{class:"fs-5 fs-lg-4 mb-4"},"訂單連絡資訊",-1),M={class:"table align-middle bg-primary-light"},Q=t("tr",null,[t("td",{class:"p-md-3 border-0"},"付款狀態"),t("td",{class:"p-md-3 border-0"},[t("span",{class:"text-danger"},"尚未付款")])],-1),q=t("td",{class:"p-md-3 border-0"},"訂單金額",-1),z={class:"p-md-3 border-0"},J=t("td",{class:"p-md-3 border-0"},"訂單編號",-1),G={class:"p-md-3 border-0"},K=t("td",{class:"p-md-3 border-0"},"訂單成立日期",-1),W={class:"p-md-3 border-0"},X=t("td",{class:"p-md-3 border-0"},"信箱",-1),Y={class:"p-md-3 border-0"},Z=t("td",{class:"p-md-3 border-0"},"姓名",-1),tt={class:"p-md-3 border-0"},st=t("td",{class:"p-md-3 border-0"},"手機",-1),et={class:"p-md-3 border-0"},ot=t("td",{class:"p-md-3 border-0"},"外送地址",-1),rt={class:"p-md-3 border-0"},dt=t("td",{class:"p-md-3 border-0"},"訂單備註",-1),it={class:"p-md-3 border-0"},ct=t("button",{type:"submit",class:"btn btn-primary w-100"},"確認付款",-1),lt={key:1,class:"card-body"},nt=g('<div class="text-center mb-2"><img src="'+S+'" alt="check"></div><h2 class="fs-5 fs-lg-4 mb-4 text-center">完成訂購</h2><div class="text-justify mb-4"><p>恭喜您已完成訂購，請留意您的手機，餐點送達您指定的地點時，將會以手機連絡您取餐。</p><p>若您是自取，製作完畢將會通知您前往取餐。 取餐地址：台南市東區樂活路 59 號</p><p>若有任何問題，歡迎來電詢問：06-2345678</p></div><div class="text-center"><a href="#/products" class="btn btn-primary w-100 py-2 fs-lg-5">看看其他餐點</a></div>',4),at=[nt],pt={class:"col-lg-5"},_t=t("h2",{class:"fs-5 fs-lg-4 mb-4"},"訂購內容",-1),ht={class:"table align-middle",style:{"font-size":"14px"}},mt=t("tr",{class:"border-bottom"},null,-1),bt={class:"d-flex align-items-center justify-content-between gap-5 gap-md-10 py-4"},ut=["src"],gt={class:"d-flex align-items-center justify-content-between w-75"},ft={class:"mb-1"},yt={class:"mb-1"},vt={class:"mb-0"},xt={class:"mb-0 text-end"};function wt(d,e,Tt,jt,s,f){var n,a,p,_;const y=j("VueLoading");return i(),c(h,null,[k(y,{active:d.isLoading,"onUpdate:active":e[0]||(e[0]=r=>d.isLoading=r)},null,8,["active"]),t("div",O,[A,s.order.is_paid?(i(),c("div",R,$)):(i(),c("div",D,N))]),t("div",B,[t("section",P,[t("div",C,[s.order.is_paid?(i(),c("div",lt,at)):(i(),c("div",F,[H,t("form",{onSubmit:e[1]||(e[1]=L(r=>f.payOrder(s.order.id),["prevent"]))},[t("table",M,[t("tbody",null,[Q,t("tr",null,[q,t("td",z,"NT$"+o(d.$filters.toThousands(s.order.total+s.shipping)),1)]),t("tr",null,[J,t("td",G,o(s.order.id),1)]),t("tr",null,[K,t("td",W,o(new Date(s.order.create_at*1e3).toLocaleDateString()),1)]),t("tr",null,[X,t("td",Y,o((n=s.order.user)==null?void 0:n.email),1)]),t("tr",null,[Z,t("td",tt,o((a=s.order.user)==null?void 0:a.name),1)]),t("tr",null,[st,t("td",et,o((p=s.order.user)==null?void 0:p.tel),1)]),t("tr",null,[ot,t("td",rt,o((_=s.order.user)==null?void 0:_.address),1)]),t("tr",null,[dt,t("td",it,o(s.order.message?s.order.message:"無"),1)])])]),ct],32)]))])]),t("section",pt,[_t,t("table",ht,[t("tbody",null,[mt,(i(!0),c(h,null,V(s.order.products,r=>(i(),c("tr",{key:r.id},[t("td",bt,[t("img",{src:r.product.imageUrl,class:"object-fit-cover d-block",width:"90",height:"90",alt:"item.product.title"},null,8,ut),t("div",gt,[t("div",null,[t("p",ft,o(r.product.title),1),t("p",yt,"NT$"+o(d.$filters.toThousands(r.product.price))+" / "+o(r.product.unit),1),t("p",vt,"數量："+o(r.qty),1)]),t("p",xt,"NT$"+o(d.$filters.toThousands(r.final_total)),1)])])]))),128))])])])])],64)}const St=v(E,[["render",wt]]);export{St as default};
