import{_ as y,m as x,b as v,r as w,o as d,c as i,e as T,d as t,F as p,y as V,H as k,t as o,g as L,f as S}from"./index-72b02649.js";import{l as h}from"./loadingStore-610d53bc.js";import{T as l}from"./toast-9ba74706.js";const{VITE_URL:b,VITE_PATH:u}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"gracewang",BASE_URL:"/vue3-QA/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},E={data(){return{order:{},shipping:0}},methods:{...x(h,["loading"]),getOrder(){const{orderId:c}=this.$route.params;this.$http.get(`${b}/api/${u}/order/${c}`).then(s=>{s.data.success&&(this.order=s.data.order,this.shipping=parseInt(this.order.total>=500?0:100))}).catch(s=>{l.fire({icon:"error",title:s.response.data.message,width:250})})},payOrder(c){this.$http.post(`${b}/api/${u}/pay/${c}`).then(s=>{s.data.success&&(this.getOrder(),l.fire({icon:"success",title:"已完成付款。",width:250}))}).catch(s=>{l.fire({icon:"error",title:s.response.data.message,width:250})})}},computed:{...v(h,["isLoading"])},mounted(){this.loading(),this.getOrder()}},O={class:"row justify-content-center mb-10"},j=S('<div class="col-3 border-bottom border-5 border-primary"><div class="d-flex flex-column align-items-center"><div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center mb-1" style="width:20px;height:20px;">1</div><p class="text-primary mb-2 fw-bold">填寫資料</p></div></div><div class="col-3 border-bottom border-5 border-primary"><div class="d-flex flex-column align-items-center"><div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center mb-1" style="width:20px;height:20px;">2</div><p class="text-primary mb-2 fw-bold">確認付款</p></div></div>',2),N={key:0,class:"col-3 border-bottom border-5 border-gray"},D=t("div",{class:"d-flex flex-column align-items-center"},[t("div",{class:"rounded-circle bg-gray text-white d-flex align-items-center justify-content-center mb-1",style:{width:"20px",height:"20px"}},"3"),t("p",{class:"text-gray mb-2 fw-bold"},"付款成功")],-1),I=[D],A={key:1,class:"col-3 border-bottom border-5 border-primary"},R=t("div",{class:"d-flex flex-column align-items-center"},[t("div",{class:"rounded-circle bg-primary text-white d-flex align-items-center justify-content-center mb-1",style:{width:"20px",height:"20px"}},"3"),t("p",{class:"text-primary mb-2 fw-bold"},"付款成功")],-1),U=[R],B={class:"row"},C={class:"col-lg-6 mb-5 mb-lg-0"},H=t("h2",{class:"fs-5 fs-lg-4 mb-4"},"訂購內容",-1),P={class:"table align-middle"},F=t("tr",{class:"border-bottom"},null,-1),M={class:"d-flex align-items-center justify-content-between gap-5 gap-md-10 py-4"},q=["src"],Q={class:"d-flex flex-column flex-md-row align-items-md-center w-75"},$={class:"d-flex flex-column w-md-75"},z={class:"mb-1 mb-md-0"},G={class:"mb-1 mb-md-0"},J={class:"mb-1 mb-md-0"},K={class:"mb-0 fs-6 text-primary text-md-end w-md-25"},W={class:"col-lg-5 offset-lg-1"},X={class:"card border-0 bg-primary-light py-3 p-lg-5"},Y={class:"card-body"},Z=t("h2",{class:"fs-5 fs-lg-4 mb-4"},"訂單連絡資訊",-1),tt={class:"table align-middle bg-primary-light"},et=t("th",{class:"p-md-3 border-0"},"付款狀態",-1),st={class:"p-md-3 border-0"},ot={key:0,class:"text-success"},rt={key:1,class:"text-danger"},dt=t("th",{class:"p-md-3 border-0"},"訂單金額",-1),it={class:"p-md-3 border-0"},ct=t("th",{class:"p-md-3 border-0"},"訂單編號",-1),lt={class:"p-md-3 border-0"},nt=t("th",{class:"p-md-3 border-0"},"訂單成立日期",-1),at={class:"p-md-3 border-0"},mt=t("th",{class:"p-md-3 border-0"},"信箱",-1),_t={class:"p-md-3 border-0"},pt=t("th",{class:"p-md-3 border-0"},"姓名",-1),ht={class:"p-md-3 border-0"},bt=t("th",{class:"p-md-3 border-0"},"手機",-1),ut={class:"p-md-3 border-0"},gt=t("th",{class:"p-md-3 border-0"},"外送地址",-1),ft={class:"p-md-3 border-0"},yt=t("th",{class:"p-md-3 border-0"},"訂單備註",-1),xt={class:"p-md-3 border-0"},vt={key:0,type:"submit",class:"btn btn-primary w-100"};function wt(c,s,Tt,Vt,e,g){var n,a,m,_;const f=w("VueLoading");return d(),i(p,null,[T(f,{active:c.isLoading,"onUpdate:active":s[0]||(s[0]=r=>c.isLoading=r)},null,8,["active"]),t("div",O,[j,e.order.is_paid?(d(),i("div",A,U)):(d(),i("div",N,I))]),t("div",B,[t("section",C,[H,t("table",P,[t("tbody",null,[F,(d(!0),i(p,null,V(e.order.products,r=>(d(),i("tr",{key:r.id},[t("td",M,[t("img",{src:r.product.imageUrl,class:"object-fit-cover d-block",width:"90",height:"90",alt:"item.product.title"},null,8,q),t("div",Q,[t("div",$,[t("p",z,o(r.product.title),1),t("p",G,"NT$"+o(r.product.price)+" / "+o(r.product.unit),1),t("p",J,"數量："+o(r.qty),1)]),t("p",K,"NT$"+o(r.final_total),1)])])]))),128))])])]),t("section",W,[t("div",X,[t("div",Y,[Z,t("form",{onSubmit:s[1]||(s[1]=k(r=>g.payOrder(e.order.id),["prevent"]))},[t("table",tt,[t("tbody",null,[t("tr",null,[et,t("td",st,[e.order.is_paid?(d(),i("span",ot,"已完成付款")):(d(),i("span",rt,"尚未付款"))])]),t("tr",null,[dt,t("td",it,"NT$"+o(e.order.total+e.shipping),1)]),t("tr",null,[ct,t("td",lt,o(e.order.id),1)]),t("tr",null,[nt,t("td",at,o(new Date(e.order.create_at*1e3).toLocaleDateString()),1)]),t("tr",null,[mt,t("td",_t,o((n=e.order.user)==null?void 0:n.email),1)]),t("tr",null,[pt,t("td",ht,o((a=e.order.user)==null?void 0:a.name),1)]),t("tr",null,[bt,t("td",ut,o((m=e.order.user)==null?void 0:m.tel),1)]),t("tr",null,[gt,t("td",ft,o((_=e.order.user)==null?void 0:_.address),1)]),t("tr",null,[yt,t("td",xt,o(e.order.message?e.order.message:"無"),1)])])]),e.order.is_paid?L("",!0):(d(),i("button",vt,"確認付款"))],32)])])])])],64)}const Et=y(E,[["render",wt]]);export{Et as default};
