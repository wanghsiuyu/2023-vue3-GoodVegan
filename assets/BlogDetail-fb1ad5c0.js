import{_ as k,R as T,m as w,a as I,i as p,o as l,b as o,j as h,d as s,k as d,t as r,e as c,f as g,F as _,r as m,n as B,G as b,g as L,K as V,L as A,w as v}from"./index-20ebf4cd.js";import{b as x}from"./blogsStore-06f70d73.js";import{T as R}from"./toast-0d089cd6.js";const{VITE_URL:j,VITE_PATH:E}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"gracewang",BASE_URL:"/vue3-QA/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},C={data(){return{article:"",isLoading:!1,currentIndex:0,searchInput:"",filterBlogs:[],allTags:["純素飲食","初學者","素食主義","健康飲食","營養均衡","氣候變遷","綠色生活","環保","植物蛋白","高蛋白飲食","食譜"],filterTags:[],breadcrumbTag:""}},components:{RouterLink:T},methods:{...w(x,["getArticles"]),getArticle(){const{id:i}=this.$route.params;this.isLoading=!0,this.$http.get(`${j}/api/${E}/article/${i}`).then(n=>{this.isLoading=!1,this.article=n.data.article,this.findIndex(),this.filterBlogs=[],this.filterTags=[]}).catch(n=>{R.fire({icon:"error",title:n.response.data.message,width:250})})},findIndex(){this.currentIndex=this.articles.findIndex(i=>i.id===this.article.id)},searchBlogs(){this.filterBlogs=this.articles.filter(i=>i.title.match(this.searchInput.trim())),this.searchInput="",this.$route.params.id=""},searchTag(i){this.filterTags=this.articles.filter(n=>n.tag.includes(i)),this.breadcrumbTag=i,this.$route.params.id=""}},computed:{...I(x,["articles"])},watch:{"$route.params":{immediate:!0,handler(){this.$route.params.id&&this.getArticle()}}},mounted(){this.getArticles(),this.getArticle()}},D={class:"container mt-20"},S={class:"pt-4 pt-lg-8 pb-10 pb-lg-20"},M={"aria-label":"breadcrumb"},U={class:"breadcrumb mb-5"},H={class:"breadcrumb-item"},N={class:"breadcrumb-item"},K={key:0,class:"breadcrumb-item active","aria-current":"page"},P={key:1,class:"breadcrumb-item active","aria-current":"page"},F={key:2,class:"breadcrumb-item active d-flex align-items-center","aria-current":"page"},O=s("span",{class:"material-icons fs-5"}," local_offer ",-1),z={class:"row text-dark gy-8"},G={key:0,class:"col-lg-8"},Q={class:"h3 mb-2"},q={class:"list-inline text-gray-dark my-5 d-flex align-items-center flex-wrap"},J={class:"list-inline-item"},W={class:"d-flex align-items-center"},X=s("span",{class:"material-icons fs-5"}," person ",-1),Y={class:"list-inline-item"},Z={class:"d-flex align-items-center"},$=s("span",{class:"material-icons fs-5"}," today ",-1),ss={class:"list-inline-item"},es={class:"d-flex align-items-center"},ts=s("span",{class:"material-icons fs-6"}," local_offer ",-1),is=["src","alt"],ls=["innerHTML"],os=s("hr",{class:"my-5 my-lg-10"},null,-1),rs={class:"row justify-content-between"},cs=s("span",{class:"material-icons me-2"}," arrow_back_ios_new ",-1),ns=s("br",null,null,-1),as={key:0,class:"col-6"},ds={class:"text-end"},_s=s("br",null,null,-1),hs=s("span",{class:"material-icons ms-2"}," arrow_forward_ios ",-1),us={key:1,class:"col-lg-8"},gs={class:"row row-cols-1 row-cols-md-2 gy-8 g-lg-10"},ms={class:"card rounded-0 border-0"},fs=["src","alt"],ps={class:"card-body"},bs={class:"card-text d-flex justify-content-between text-gray-dark"},vs={class:"mb-2"},xs={class:"mb-2"},ys={class:"text-dark"},ks={class:"card-title text-truncate"},Ts={class:"card-text line-clamp"},ws={key:2,class:"col-lg-8"},Is={class:"row row-cols-1 row-cols-md-2 gy-8 g-lg-10"},Bs={class:"card rounded-0 border-0"},Ls=["src","alt"],Vs={class:"card-body"},As={class:"card-text d-flex justify-content-between text-gray-dark"},Rs={class:"mb-2"},js={class:"mb-2"},Es={class:"text-dark"},Cs={class:"card-title text-truncate"},Ds={class:"card-text line-clamp"},Ss={class:"col-lg-3 offset-lg-1"},Ms={class:"mb-5 mb-lg-10 position-relative"},Us=s("label",{for:"search",class:"form-label mb-2 mb-lg-4"},[s("h5",null,"搜尋")],-1),Hs=s("span",{class:"material-icons position-absolute text-gray-dark search-icon"}," search ",-1),Ns=[Hs],Ks=s("h5",{class:"mb-2 mb-lg-4"},"Tags",-1),Ps={class:"d-flex flex-wrap align-items-center ps-2 ps-lg-0 mb-5 mb-lg-10"},Fs=["onClick"],Os=s("span",{class:"material-icons fs-5"}," local_offer ",-1),zs=s("h5",{class:"mb-2 mb-lg-4"},"近期文章",-1),Gs={class:"mb-2"};function Qs(i,n,qs,Js,t,u){const y=p("VueLoading"),a=p("RouterLink");return l(),o(_,null,[h(y,{active:t.isLoading,"onUpdate:active":n[0]||(n[0]=e=>t.isLoading=e)},null,8,["active"]),s("div",D,[s("div",S,[s("nav",M,[s("ol",U,[s("li",H,[h(a,{to:"/"},{default:d(()=>[c("首頁")]),_:1})]),s("li",N,[h(a,{to:"/blogs"},{default:d(()=>[c("專欄文章")]),_:1})]),!t.filterBlogs.length&&!t.filterTags.length?(l(),o("li",K,r(t.article.title),1)):t.filterBlogs.length?(l(),o("li",P,"搜尋結果")):t.filterTags.length?(l(),o("li",F,[O,c(r(t.breadcrumbTag),1)])):g("",!0)])]),s("div",z,[!t.filterBlogs.length&&!t.filterTags.length?(l(),o("div",G,[s("article",null,[s("h1",Q,r(t.article.title),1),s("ul",q,[s("li",J,[s("div",W,[X,c(r(t.article.author),1)])]),s("li",Y,[s("div",Z,[$,c(r(i.$filters.date(t.article.create_at)),1)])]),s("li",ss,[s("div",es,[(l(!0),o(_,null,m(t.article.tag,e=>(l(),o("span",{key:e,class:"d-flex align-items-center me-1"},[ts,c(r(e),1)]))),128))])])]),s("img",{src:t.article.image,alt:t.article.title,class:"img-fluid object-fit-cover mb-5"},null,8,is),s("div",{innerHTML:t.article.content},null,8,ls)]),os,s("div",rs,[s("div",{class:B(["col-6",{"border-end":t.currentIndex!==0&&t.currentIndex!==i.articles.length-1}])},[i.articles[t.currentIndex-1]?(l(),b(a,{key:0,to:`/blogs/${i.articles[t.currentIndex-1].id}`,class:"d-flex align-items-center"},{default:d(()=>[cs,s("div",null,[c(" 上一篇："),ns,c(" "+r(i.articles[t.currentIndex-1].title),1)])]),_:1},8,["to"])):g("",!0)],2),i.articles[t.currentIndex+1]?(l(),o("div",as,[h(a,{to:`/blogs/${i.articles[t.currentIndex+1].id}`,class:"d-flex align-items-center justify-content-end"},{default:d(()=>[s("div",ds,[c(" 下一篇："),_s,c(" "+r(i.articles[t.currentIndex+1].title),1)]),hs]),_:1},8,["to"])])):g("",!0)])])):t.filterBlogs.length?(l(),o("div",us,[s("div",gs,[(l(!0),o(_,null,m(t.filterBlogs,e=>(l(),o("div",{key:e.id,class:"col"},[s("div",ms,[s("img",{src:e.image,class:"w-100 object-fit-cover rounded-0",alt:e.title,height:"250"},null,8,fs),s("div",ps,[s("div",bs,[s("p",vs,r(i.$filters.date(e.create_at)),1),s("p",xs,[c(" by "),s("span",ys,r(e.author),1)])]),s("h5",ks,r(e.title),1),s("p",Ts,r(e.description),1),h(a,{to:`/blogs/${e.id}`,class:"stretched-link"},{default:d(()=>[c("閱讀更多 >")]),_:2},1032,["to"])])])]))),128))])])):t.filterTags.length?(l(),o("div",ws,[s("div",Is,[(l(!0),o(_,null,m(t.filterTags,e=>(l(),o("div",{key:e.id,class:"col"},[s("div",Bs,[s("img",{src:e.image,class:"w-100 object-fit-cover rounded-0",alt:e.title,height:"250"},null,8,Ls),s("div",Vs,[s("div",As,[s("p",Rs,r(i.$filters.date(e.create_at)),1),s("p",js,[c(" by "),s("span",Es,r(e.author),1)])]),s("h5",Cs,r(e.title),1),s("p",Ds,r(e.description),1),h(a,{to:`/blogs/${e.id}`,class:"stretched-link"},{default:d(()=>[c("閱讀更多 >")]),_:2},1032,["to"])])])]))),128))])])):g("",!0),s("div",Ss,[s("div",Ms,[Us,L(s("input",{id:"search",type:"text",class:"form-control","onUpdate:modelValue":n[1]||(n[1]=e=>t.searchInput=e),placeholder:"請輸入關鍵字","aria-label":"請輸入關鍵字",onKeyup:n[2]||(n[2]=A((...e)=>u.searchBlogs&&u.searchBlogs(...e),["enter"]))},null,544),[[V,t.searchInput]]),s("a",{href:"#",onClick:n[3]||(n[3]=v((...e)=>u.searchBlogs&&u.searchBlogs(...e),["prevent"]))},Ns)]),Ks,s("div",Ps,[(l(!0),o(_,null,m(t.allTags,e=>(l(),o("a",{key:e,href:"#",onClick:v(f=>u.searchTag(e),["prevent"]),class:"d-flex align-items-center me-2 mb-2 text-dark tag-hover"},[Os,c(r(e),1)],8,Fs))),128))]),zs,(l(!0),o(_,null,m(i.articles,(e,f)=>(l(),o(_,{key:e.id},[f<3?(l(),b(a,{key:0,to:`/blogs/${e.id}`},{default:d(()=>[s("p",Gs,r(e.title),1)]),_:2},1032,["to"])):g("",!0)],64))),128))])])])])],64)}const Zs=k(C,[["render",Qs]]);export{Zs as default};
