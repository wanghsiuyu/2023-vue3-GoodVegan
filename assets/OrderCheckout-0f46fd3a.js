import{_ as f,m as y,b as x,r as v,o as d,c as i,e as w,d as t,F as m,y as V,H as k,t as o,g as L,f as S}from"./index-0aeb2573.js";import{l as p}from"./loadingStore-52d29748.js";const{VITE_URL:h,VITE_PATH:b}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"gracewang",BASE_URL:"/vue3-QA/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},T={data(){return{order:{},shipping:0}},methods:{...y(p,["loading"]),getOrder(){const{orderId:c}=this.$route.params;this.$http.get(`${h}/api/${b}/order/${c}`).then(e=>{e.data.success&&(this.order=e.data.order,this.shipping=parseInt(this.order.total>=500?0:100))}).catch(e=>{console.log(e)})},payOrder(c){this.$http.post(`${h}/api/${b}/pay/${c}`).then(e=>{e.data.success&&this.getOrder()}).catch(e=>{console.log(e)})}},computed:{...x(p,["isLoading"])},mounted(){this.loading(),this.getOrder()}},E={class:"row justify-content-center mb-10"},O=S('<div class="col-3 border-bottom border-5 border-primary"><div class="d-flex flex-column align-items-center"><div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center mb-1" style="width:20px;height:20px;">1</div><p class="text-primary mb-2 fw-bold">填寫資料</p></div></div><div class="col-3 border-bottom border-5 border-primary"><div class="d-flex flex-column align-items-center"><div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center mb-1" style="width:20px;height:20px;">2</div><p class="text-primary mb-2 fw-bold">確認付款</p></div></div>',2),j={key:0,class:"col-3 border-bottom border-5 border-gray"},N=t("div",{class:"d-flex flex-column align-items-center"},[t("div",{class:"rounded-circle bg-gray text-white d-flex align-items-center justify-content-center mb-1",style:{width:"20px",height:"20px"}},"3"),t("p",{class:"text-gray mb-2 fw-bold"},"付款成功")],-1),D=[N],I={key:1,class:"col-3 border-bottom border-5 border-primary"},A=t("div",{class:"d-flex flex-column align-items-center"},[t("div",{class:"rounded-circle bg-primary text-white d-flex align-items-center justify-content-center mb-1",style:{width:"20px",height:"20px"}},"3"),t("p",{class:"text-primary mb-2 fw-bold"},"付款成功")],-1),R=[A],U={class:"row"},B={class:"col-lg-6 mb-5 mb-lg-0"},C=t("h2",{class:"fs-5 fs-lg-4 mb-4"},"訂購內容",-1),H={class:"table align-middle"},P=t("tr",{class:"border-bottom"},null,-1),F={class:"d-flex align-items-center justify-content-between gap-5 gap-md-10 py-4"},M=["src"],q={class:"d-flex flex-column flex-md-row align-items-md-center w-75"},Q={class:"d-flex flex-column w-md-75"},$={class:"mb-1 mb-md-0"},z={class:"mb-1 mb-md-0"},G={class:"mb-1 mb-md-0"},J={class:"mb-0 fs-6 text-primary text-md-end w-md-25"},K={class:"col-lg-5 offset-lg-1"},W={class:"card border-0 bg-primary-light py-3 p-lg-5"},X={class:"card-body"},Y=t("h2",{class:"fs-5 fs-lg-4 mb-4"},"訂單連絡資訊",-1),Z={class:"table align-middle bg-primary-light"},tt=t("th",{class:"p-md-3 border-0"},"付款狀態",-1),st={class:"p-md-3 border-0"},et={key:0,class:"text-success"},ot={key:1,class:"text-danger"},rt=t("th",{class:"p-md-3 border-0"},"訂單金額",-1),dt={class:"p-md-3 border-0"},it=t("th",{class:"p-md-3 border-0"},"訂單編號",-1),ct={class:"p-md-3 border-0"},lt=t("th",{class:"p-md-3 border-0"},"訂單成立日期",-1),nt={class:"p-md-3 border-0"},at=t("th",{class:"p-md-3 border-0"},"信箱",-1),_t={class:"p-md-3 border-0"},mt=t("th",{class:"p-md-3 border-0"},"姓名",-1),pt={class:"p-md-3 border-0"},ht=t("th",{class:"p-md-3 border-0"},"手機",-1),bt={class:"p-md-3 border-0"},ut=t("th",{class:"p-md-3 border-0"},"地址",-1),gt={class:"p-md-3 border-0"},ft=t("th",{class:"p-md-3 border-0"},"訂單備註",-1),yt={class:"p-md-3 border-0"},xt={key:0,type:"submit",class:"btn btn-primary w-100"};function vt(c,e,wt,Vt,s,u){var l,n,a,_;const g=v("VueLoading");return d(),i(m,null,[w(g,{active:c.isLoading,"onUpdate:active":e[0]||(e[0]=r=>c.isLoading=r)},null,8,["active"]),t("div",E,[O,s.order.is_paid?(d(),i("div",I,R)):(d(),i("div",j,D))]),t("div",U,[t("section",B,[C,t("table",H,[t("tbody",null,[P,(d(!0),i(m,null,V(s.order.products,r=>(d(),i("tr",{key:r.id},[t("td",F,[t("img",{src:r.product.imageUrl,class:"object-fit-cover d-block",width:"90",height:"90",alt:"item.product.title"},null,8,M),t("div",q,[t("div",Q,[t("p",$,o(r.product.title),1),t("p",z,"NT$"+o(r.product.price)+" / "+o(r.product.unit),1),t("p",G,"數量："+o(r.qty),1)]),t("p",J,"NT$"+o(r.final_total),1)])])]))),128))])])]),t("section",K,[t("div",W,[t("div",X,[Y,t("form",{onSubmit:e[1]||(e[1]=k(r=>u.payOrder(s.order.id),["prevent"]))},[t("table",Z,[t("tbody",null,[t("tr",null,[tt,t("td",st,[s.order.is_paid?(d(),i("span",et,"已完成付款")):(d(),i("span",ot,"尚未付款"))])]),t("tr",null,[rt,t("td",dt,"NT$"+o(s.order.total+s.shipping),1)]),t("tr",null,[it,t("td",ct,o(s.order.id),1)]),t("tr",null,[lt,t("td",nt,o(new Date(s.order.create_at*1e3).toLocaleDateString()),1)]),t("tr",null,[at,t("td",_t,o((l=s.order.user)==null?void 0:l.email),1)]),t("tr",null,[mt,t("td",pt,o((n=s.order.user)==null?void 0:n.name),1)]),t("tr",null,[ht,t("td",bt,o((a=s.order.user)==null?void 0:a.tel),1)]),t("tr",null,[ut,t("td",gt,o((_=s.order.user)==null?void 0:_.address),1)]),t("tr",null,[ft,t("td",yt,o(s.order.message?s.order.message:"無"),1)])])]),s.order.is_paid?L("",!0):(d(),i("button",xt,"確認付款"))],32)])])])])],64)}const St=f(T,[["render",vt]]);export{St as default};
