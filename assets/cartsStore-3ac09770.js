import{B as l,C as r}from"./index-81e4f8a2.js";import{l as d}from"./loadingStore-f8f0d968.js";const s=d(),{VITE_URL:o,VITE_PATH:i}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"gracewang",BASE_URL:"/vue3-QA/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},h=l("cartsStore",{state:()=>({cartsTotal:{},cartsTotalNum:0,shipping:0}),actions:{addToCart(t,a=1){const e={product_id:t,qty:a};s.loadingStatus=t,r.post(`${o}/api/${i}/cart`,{data:e}).then(c=>{s.loadingStatus="",alert(c.data.message),this.getCart()}).catch(c=>{alert(c.response.data.message)})},getCart(){r.get(`${o}/api/${i}/cart`).then(t=>{this.cartsTotal=t.data.data,this.cartsTotalNum=this.cartsTotal.carts.reduce((a,e)=>a+e.qty,0),this.shipping=parseInt(this.cartsTotal.total>=500?0:100)}).catch(t=>{alert(t.response.data.message)})},removeCart(t){s.loadingStatus=t,r.delete(`${o}/api/${i}/cart/${t}`).then(a=>{s.loadingStatus="",alert(a.data.message),this.getCart()}).catch(a=>{alert(a.response.data.message)})},removeCartsAll(){r.delete(`${o}/api/${i}/carts`).then(t=>{alert(t.data.message),this.getCart()}).catch(t=>{alert(t.response.data.message)})},setCartQty(t){const a={product_id:t.product_id,qty:t.qty};s.loadingStatus=t.id,r.put(`${o}/api/${i}/cart/${t.id}`,{data:a}).then(e=>{s.loadingStatus="",alert(e.data.message),this.getCart()}).catch(e=>{alert(e.response.data.message)})}}});export{h as c};
